{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Smart Academic Management System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
body {
    background: #ffffff;
    min-height: 100vh;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* ===== Floating Academic Icons ===== */
.floating-icon {
    position: absolute;
    font-size: 42px;
    opacity: 0.15;
    animation: float 6s ease-in-out infinite;
}

@keyframes float {
    0% { transform: translateY(0); opacity: 0.15; }
    50% { transform: translateY(-20px); opacity: 0.3; }
    100% { transform: translateY(0); opacity: 0.15; }
}

/* Icon positions + colors */
.icon1 { top: 15%; left: 10%; color: #007bff; animation-delay: 0s; }       /* Blue */
.icon2 { top: 25%; right: 15%; color: #ff9800; animation-delay: 1.5s; }     /* Orange */
.icon3 { bottom: 20%; left: 18%; color: #28a745; animation-delay: 3s; }     /* Green */
.icon4 { bottom: 15%; right: 10%; color: #6f42c1; animation-delay: 4.5s; }  /* Purple */

.floating-icon {
    text-shadow: 0 0 10px rgba(255,255,255,0.8);
}

/* Login Card */
.login-card {
    width: 400px;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    padding: 40px 35px;
    z-index: 5;
    text-align: center;
    animation: fadeInUp 0.9s ease-out;
}

@keyframes fadeInUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.logo {
    width: 90px;
    border-radius: 50%;
    margin-bottom: 10px;
}

h3 { font-weight: 700; margin-bottom: 5px; }

p.text-muted { font-size: 0.9rem; }

.input-group-text { background: #f8f9fa; border-radius: 8px 0 0 8px; }

.form-control { border-radius: 0 8px 8px 0; }

.input-group .input-group-text:last-child { border-radius: 0 8px 8px 0; cursor: pointer; }

.btn-warning { border-radius: 8px; font-weight: 600; background-color: #ffb100; border: none; }
.btn-warning:hover { background-color: #ffa31a; }

.forgot-link { font-size: 0.9rem; color: #ff9800; text-decoration: none; }
.forgot-link:hover { text-decoration: underline; }

/* ===== Floating Help Icon ===== */
.help-icon {
    position: fixed;
    bottom: 25px;
    right: 25px;
    font-size: 45px;
    color: #ff5722;
    opacity: 0.9;
    cursor: pointer;
    z-index: 9999;
    animation: floatHelp 3s ease-in-out infinite;
}

@keyframes floatHelp {
    0% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0); }
}
</style>
</head>
<body>

<!-- 🎓 Colorful Floating Icons -->
<i class="fa-solid fa-book-open floating-icon icon1"></i>
<i class="fa-solid fa-graduation-cap floating-icon icon2"></i>
<i class="fa-solid fa-laptop-code floating-icon icon3"></i>
<i class="fa-solid fa-chalkboard-teacher floating-icon icon4"></i>

<!-- ❓ Floating Help Icon -->
<i class="fa-solid fa-circle-question help-icon" title="Need Help?" 
   onclick="Swal.fire('Help', 'Contact your admin for login support.', 'info')"></i>

<div class="login-card">
     <img src="https://raw.githubusercontent.com/Riyas-n-s/SAMS/master/static/accounts/images/logo.jpeg" alt="Logo" style="width:100px;">
    <h3>Smart Academic System</h3>
    <p class="text-muted">Login to access your dashboard</p>

    {% if error %}
    <script>Swal.fire({ icon: 'error', title: 'Login Failed', text: '{{ error }}' });</script>
    {% endif %}
    {% if success %}
    <script>Swal.fire({ icon: 'success', title: 'Success!', text: '{{ success }}' });</script>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <div class="mb-3 text-start">
            <label class="form-label">Username</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-user"></i></span>
                <input type="text" name="username" class="form-control" placeholder="Enter username" required>
            </div>
        </div>

        <div class="mb-3 text-start">
            <label class="form-label">Password</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                <input type="password" name="password" id="password" class="form-control" placeholder="Enter password" required>
                <span class="input-group-text" onclick="togglePassword()">
                    <i class="fa-solid fa-eye" id="eyeIcon"></i>
                </span>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <a id="forgotLink" class="forgot-link" href="#">Forgot Password?</a>
        </div>

        <button type="submit" class="btn btn-warning w-100">Login</button>
        <p class="text-center mt-3 text-muted">
            Don’t have an account? 
            <a href="{% url 'loader_page' 'register' %}" class="text-warning">Register</a>
        </p>
    </form>
</div>

<script>
document.getElementById('forgotLink').addEventListener('click', function (e) {
    e.preventDefault();
    const username = document.querySelector('input[name="username"]').value.trim();
    if (!username) {
        Swal.fire({ icon: 'warning', title: 'Oops!', text: 'Please enter your username first.' });
        return;
    }
    window.location.href = `/forgot-password-otp/?username=${encodeURIComponent(username)}`;
});

function togglePassword() {
    const passwordInput = document.getElementById("password");
    const eyeIcon = document.getElementById("eyeIcon");
    if (passwordInput.type === "password") {
        passwordInput.type = "text";
        eyeIcon.classList.replace("fa-eye", "fa-eye-slash");
    } else {
        passwordInput.type = "password";
        eyeIcon.classList.replace("fa-eye-slash", "fa-eye");
    }
}
</script>
</body>
</html>
